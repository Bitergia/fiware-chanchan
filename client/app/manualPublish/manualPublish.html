<div class="row">
  <h3>
    Manual Publish of Data from Orion to CKAN
    </h3>
</div>

<div class="row well" style="margin-bottom: 10px">
  <span class="h5 ">Publish to organization </span>
  <select ng-model="org_selected">
    <option ng-repeat="org in orgs">{{org.name}}</option>
  </select>
</div>

<div class="row">
  <div class="col-md-4" data-ng-show="org_selected != ''">
    Context (entity type) name <input ng-model="orgs[org_selected]['context_new']" size="15">
    <button ng-click="createContext(org_selected)">Add</button>
  </div>
  <div class="col-md-8" data-ng-show="org_selected != ''">
    Temperature <input ng-model="orgs[org_selected]['temperature']" size="4">
    <select
      ng-model="orgs[org_selected]['context']">
      <option ng-repeat="name in orgs_entities[org_selected]">{{name}}</option>
    </select>
    <button ng-click="updateTemperature(org_selected)">Publish
      {{org.name}}</button>
  </div>
</div>

<div class="row" style="margin-top: 20px" data-ng-show="org_selected != ''">
  <div class="panel panel-default panel-success">
  <div class="panel-heading">CKAN contents for {{org_selected}}
      <button type="button" data-ng-click="update_ckan()">
        <span class="fa fa-refresh" aria-hidden="true"></span>
      </button>
  </div>
    <div class="panel-body">
      <i data-ng-show="orgs_entities[org_selected].length == 0" class="fa fa-spinner fa-spin fa-3x"></i>
      <ul>
        <li ng-repeat="dataset in orgs_datasets[org_selected]">{{dataset.name}}
          <ul>
            <li ng-repeat="resource in dataset['resources']">
              {{resource.name}}
              <ul>
                <li ng-repeat="value in resource['values']">
                  {{value.attrValue}} <small>{{value.recvTime}}</small>
                </li>
              </ul>
          </ul>
        </li>
      </ul>
    </div>
  </div>
</div>
